<!-- begin:: Content -->
<div class="kt-container  kt-container--fluid  kt-grid__item kt-grid__item--fluid">
    
    <div class="kt-portlet kt-portlet--mobile">
        <div class="kt-portlet__head">
            <div class="kt-portlet__head-label">
                <h3 class="kt-portlet__head-title">
                    <%= title %>
                </h3>
                
            </div>
            <div class="kt-portlet__head-toolbar">
                <div class="kt-portlet__head-toolbar">
                    <div class="dropdown dropdown-inline">
                        <% if (user.profile == 'Owner') { %>
                        <button type="button" class="btn btn-brand btn-brand btn-upper btn-bold" data-toggle="modal" data-target="#userTask">Create Task By User</button>
                        <button type="button" class="btn btn-brand btn-brand btn-upper btn-bold" data-toggle="modal" data-target="#teamTask">Create Task By Team</button>
                        <!-- Modal -->
                            <div class="modal fade" id="userTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Create a new Task</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form action="/todo/task/create/user" method="post" class="kt-form" >
                                                <div class="kt-portlet__body">
                                                    <div class="kt-section kt-section--first">
                                                        <div class="form-group">
                                                            <label>Task Title:</label>
                                                            <input type="text" name="title" class="form-control" placeholder="Enter Task Title">
                                                            <label>Task Description:</label>
                                                            <input type="text" name="desc" class="form-control" placeholder="Enter Task Description">
                                                            <label for="duration">Duration:</label>
                                        						<select class="form-control" id="duration" name="duration">
                                        							<option > Select Task Duration</option>
                                        							<option value="1">1 Hour</option>
                                        							<option value="2">2 Hours</option>
                                        							<option value="3">3 Hours</option>
                                        							<option value="4">4 Hours</option>
                                        							<option value="5">5 Hours</option>
                                        							<option value="6">6 Hours</option>
                                        							<option value="7">7 Hours</option>
                                        							<option value="8">8 Hours</option>
                                        						</select>
                                        					<label for="employee">Employee:</label>
                                        						<select class="form-control" id="employee" name="employee">
                                        							<option > Select Employee</option>
                                        							<% employees.forEach(function(employee) { %>
                                        							<option value="<%= employee.username %>"><%= employee.username %></option>
                                        							<% }); %>
                                        						</select>
                                                            
                                                            <input hidden type="text" name="board_id" class="form-control" value="<%= board.id %>">
                                                            <input hidden type="text" name="user_id" class="form-control" value="<%= user.id %>">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-brand" data-dismiss="modal">Close</button>
                                                    <Input type="submit" class="btn btn-brand" value="Create">
                                                </div>
                                            </form>
                                        </div>
                                        
                                        
                                    </div>
                                </div>
                            </div>
                            
                            <div class="modal fade" id="teamTask" tabindex="-1" role="dialog" aria-labelledby="exampleModalLabel" aria-hidden="true">
                                <div class="modal-dialog" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="exampleModalLabel">Create a new Task</h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">&times;</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <form action="/todo/task/create/team" method="post" class="kt-form" >
                                                <div class="kt-portlet__body">
                                                    <div class="kt-section kt-section--first">
                                                        <div class="form-group">
                                                            <label>Task Title:</label>
                                                            <input type="text" name="title" class="form-control" placeholder="Enter Task Title">
                                                            <label>Task Description:</label>
                                                            <input type="text" name="desc" class="form-control" placeholder="Enter Task Description">
                                                            <label for="duration">Duration:</label>
                                        						<select class="form-control" id="duration" name="duration">
                                        							<option > Select Task Duration</option>
                                        							<option value="1">1 Hour</option>
                                        							<option value="2">2 Hours</option>
                                        							<option value="3">3 Hours</option>
                                        							<option value="4">4 Hours</option>
                                        							<option value="5">5 Hours</option>
                                        							<option value="6">6 Hours</option>
                                        							<option value="7">7 Hours</option>
                                        							<option value="8">8 Hours</option>
                                        						</select>
                                        					<label for="team">Team:</label>
                                        						<select class="form-control" id="team" name="team">
                                        							<option > Select Team</option>
                                        							<% teams.forEach(function(team) { %>
                                        							<option value="<%= team.id %>"><%= team.team_name %></option>
                                        							<% }); %>
                                        						</select>
                                                            
                                                            <input hidden type="text" name="board_id" class="form-control" value="<%= board.id %>">
                                                            <input hidden type="text" name="user_id" class="form-control" value="<%= user.id %>">
                                                        </div>
                                                    </div>
                                                </div>
                                                <div class="modal-footer">
                                                    <button type="button" class="btn btn-outline-brand" data-dismiss="modal">Close</button>
                                                    <Input type="submit" class="btn btn-brand" value="Create">
                                                </div>
                                            </form>
                                        </div>
                                        
                                        
                                    </div>
                                </div>
                            </div>
                            <% } %>
                    </div>
                </div>
            </div>
        </div>
        <div class="kt-portlet__body">
            <% if (errors) { %>
                <% errors.forEach(function(error){ %>
        			<div class="alert alert-solid-danger alert-bold" role="alert">
                        <div class="alert-text"><%= error.msg %></div><br>
                        <div class="alert-close">
        				  	<button type="button" class="close" data-dismiss="alert" aria-label="Close">
        				    	<span aria-hidden="true"><i class="la la-close"></i></span>
        				  	</button>
        				</div>
                    </div>
                <% }); %>
            <% }  %>
            <!--begin: Datatable -->
            <% if (tasks.length == 0) { %>
                <div class="kt-heading kt-heading--center">Oops... No task on this board yet.</div>
            <% } else { %>
            <table class="table table-striped- table-bordered table-hover" id="">
                <thead>
                    <tr>
                        <th>ID</th>
                        <th>Task Title</th>
                        <th>Duration</th>
                        <th>Status</th>
                        <th>Created By</th>
                        <th>Time Created</th>
                        <th>Last Modified</th>
                        <th>Assigned To</th>
                        <% if (user.profile == 'Owner') { %>
                        <th>Action</th>
                        <% } %>
                    </tr>
                </thead>
                <tbody>
                    <% tasks.forEach(function(task) { %>
                    <tr>
                        <td><%= task.id %></td>
                        <td><%= task.title %></td>
                        <td><%= task.duration %> Hour(s)</td>
                        <td>
                            <% if (task.status == 'Backlog') { %>
                            <span class="btn btn-label-primary btn-sm"><%= task.status %></span>
                            <% }else if (task.status == 'Todo') %>
                            <span class="btn btn-label-primary btn-sm"><%= task.status %></span>
                            <% }else if (task.status == 'InProgress') %>
                            <span class="btn btn-label-primary btn-sm"><%= task.status %></span>
                            <% }else if (task.status == 'Review') %>
                            <span class="btn btn-label-primary btn-sm"><%= task.status %></span>
                            <% } else {%>
                            <span class="btn btn-label-primary btn-sm"><%= task.status %></span>
                            <% } %>
                        </td>
                        <td><%= task.user.username %></td>
                        <td><%= moment(task.createdAt).fromNow() %></td>
                        <td><%= moment(task.updatedAt).fromNow() %></td>
                        <% if (task.Employee == null) { %>
                        <td><%= task.Team.team_name %></td>
                        <% } else { %>
                        <td><%= task.Employee %></td>
                        <% } %>
                        <% if (user.profile == 'Owner') { %>
                        <td><a href="/todo/task/<%= task.id %>/delete" class="btn btn-danger btn-elevate btn-icon btn-xs"><i class="la la-trash"></i></a></td>
                        <% } %>
                    </tr>
                    <% }); %>
                </tbody>
            </table>
            <% } %>
            <!--end: Datatable -->

        </div>
        
    </div>
    
</div>

<!-- end:: Content -->


